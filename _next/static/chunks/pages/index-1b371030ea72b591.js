(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7800)}])},7800:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return K}});var n,a,c=r(5893),s=r(9008),o=r.n(s),u=r(7294);!function(t){t.INPUT_CHAR="INPUT_CHAR",t.REMOVE_CHAR="REMOVE_CHAR",t.GUESS_SECRET="GUESS_SECRET",t.NEW_GAME="NEW_GAME",t.SET_RANDOM_BACKGROUND_CHAR="SET_RANDOM_BACKGROUND_CHAR"}(n||(n={})),function(t){t.PLAYING="PLAYING",t.WON="WON",t.LOST="LOST"}(a||(a={}));var i=function(t){var e=t.gameState,r=t.currentAttemptIdx,n=t.maxAttempts,s=t.secretWord,o="turn ".concat(r+1,"/").concat(n+1);return e===a.WON?o="You won!!":e===a.LOST?o="You lost. The correct answer is ".concat(s):r===n&&(o="Last attempt"),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h1",{children:"Shmurgle"}),(0,c.jsx)("p",{children:o})]})},l=r(1322),p=r(9885),m=r.n(p);var d=function(t){var e=t.color,r=t.offsetY;return(0,c.jsxs)("div",{className:m().background_waves,children:[(0,c.jsxs)("svg",{className:m().waves,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28",preserveAspectRatio:"none",shapeRendering:"auto",children:[(0,c.jsx)("defs",{children:(0,c.jsx)("path",{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})}),(0,c.jsxs)("g",{className:m().parallax,children:[(0,c.jsx)("use",{xlinkHref:"#gentle-wave",x:"48",y:"0",fill:e,style:{opacity:.6}}),(0,c.jsx)("use",{xlinkHref:"#gentle-wave",x:"48",y:"3",fill:e,style:{opacity:.4}}),(0,c.jsx)("use",{xlinkHref:"#gentle-wave",x:"48",y:"5",fill:e,style:{opacity:.2}}),(0,c.jsx)("use",{xlinkHref:"#gentle-wave",x:"48",y:"8",fill:e,style:{opacity:1}})]})]}),(0,c.jsx)("div",{className:m().grower,style:{height:r,backgroundColor:e}})]})},h=r(9221),_=r.n(h),f=r(4184),v=r.n(f);var g=function(t,e){var r=(0,u.useRef)();(0,u.useEffect)((function(){r.current=t}),[t]),(0,u.useEffect)((function(){if(null!==e){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e])};function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b=["\ud83c\udf89","\ud83c\udfc6","\ud83d\ude0a","\ud83d\ude4c","\u2665"],x=["\ud83d\udc80","\ud83d\udca9","\ud83d\ude14","\ud83d\ude20","\ud83e\udd2c"];function y(t){return t===a.WON?b[Math.floor(Math.random()*b.length)]:x[Math.floor(Math.random()*x.length)]}var E=function(t){var e=t.characters,r=t.gameState,s=t.currentAttemptValue,o=t.previousAttempts,i=(0,u.useContext)(X),l=(0,u.useState)([]),p=l[0],m=l[1],d=(0,u.useState)([]),h=d[0],f=d[1];return(0,u.useEffect)((function(){var t=[],e=[];o.forEach((function(r){var n=r.input,a=r.result;n.split("").forEach((function(r,n){"X"===a[n]||"O"===a[n]?t.push(r):e.push(r)}))})),m(t),f(e)}),[o]),g((function(){r!==a.WON&&r!==a.LOST||i({type:n.SET_RANDOM_BACKGROUND_CHAR,payload:y(r)})}),30),(0,c.jsx)("div",{className:_().background_chars,children:e.map((function(t,e){var r,n=v()(_().background_char,(A(r={},_().present,p.includes(t)),A(r,_().absent,h.includes(t)),A(r,_().pulsate,b.includes(t)||x.includes(t)),A(r,_().highlight,s.includes(t)&&Math.random()>.25),r));return(0,c.jsx)("span",{className:n,children:t},e)}))})},w=r(8716),k=r.n(w);var N=function(t){var e=t.gameState,r=t.currentAttemptIdx,n=t.maxAttempts,s=t.currentAttemptValue,o=t.previousAttempts,u=t.backgroundChars,i=a.LOST,p=a.WON,m=e===i||e===p?"100vh":"".concat(12*r+30,"vh"),h=(0,l.CD)("rgb(21,177,239)","rgb(211, 47, 47)",1-r/n)({});return e===p&&(h="rgb(0,192,118)"),(0,c.jsxs)("div",{className:k().background_container,children:[(0,c.jsx)(d,{color:h,offsetY:m}),(0,c.jsx)(E,{characters:u,gameState:e,currentAttemptIdx:r,currentAttemptValue:s,previousAttempts:o})]})},j=r(8856),S=r.n(j);var C=function(t){var e=t.input,r=t.current,n=[];for(e.length>0&&(n=e.split(""));n.length<U;)n.push("");var a,s,o,u=v()(S().attempt_char,(a={},s=S().current,o=r,s in a?Object.defineProperty(a,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[s]=o,a));return(0,c.jsx)(c.Fragment,{children:n.map((function(t,e){return(0,c.jsx)("span",{className:u,children:t},"".concat(e,"_").concat(t))}))})};function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var R=function(t){var e=t.attemptInput,r=void 0===e?"":e,n=t.attemptResult,a=void 0===n?"":n,s=[];if(0===r.length&&0===a.length)s.push((0,c.jsx)(C,{input:r},"smth"));else for(var o=0;o<5;o++){var u,i=r.charAt(o),l=a.charAt(o),p=v()(S().attempt_char,(O(u={},S().attempt_char__correct,"X"===l),O(u,S().attempt_char__present,"O"===l),O(u,S().attempt_char__absent,"_"===l),u));s.push((0,c.jsx)("span",{className:p,children:i},o))}return(0,c.jsx)("div",{className:S().attempt,children:s})};var M=function(t){var e=t.previousAttempts,r=t.maxAttempts,n=t.currentAttemptIdx,s=t.currentAttemptValue,o=t.gameState,u=[];e.forEach((function(t,e){u.push((0,c.jsx)(R,{attemptInput:t.input,attemptResult:t.result},"prev_".concat(e)))})),o===a.PLAYING&&u.push((0,c.jsx)("div",{className:S().attempt,children:(0,c.jsx)(C,{input:s,current:!0})},"currentAttempt"));for(var i=n;i<r;i++)u.push((0,c.jsx)(R,{},"".concat(n,"_").concat(i)));return(0,c.jsx)("div",{className:S().attempts_container,children:u})};function I(){var t=Math.floor(Math.random()*G.length);return G[t]}function W(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=[],n=0;n<t;n++){var a=e[Math.floor(Math.random()*e.length)];r.push(a)}return r}var G=["anise","apple","aspic","bacon","bagel","basil","beans","berry","bland","bread","broil","candy","cater","chard","chili","chips","cream","crepe","crisp","crust","curds","curry","dairy","dates","diner","dough","dried","drink","feast","flour","fried","fruit","grain","grape","gravy","guava","herbs","honey","icing","jelly","juice","kebab","knife","ladle","lemon","liver","lunch","maize","mango","melon","mints","mochi","munch","olive","onion","order","pasta","patty","peach","pecan","pilaf","pizza","plate","prune","punch","roast","salad","salsa","sauce","seeds","slice","snack","spicy","spoon","spork","spuds","squid","steak","stove","straw","sugar","sushi","sweet","syrup","thyme","toast","torte","tuber","wafer","water","wheat","yeast"];function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){P(t,e,r[e])}))}return t}function H(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return T(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t){var e=t.secretWord,r=t.backgroundChars;return console.log("secretWord",e),{gameState:a.PLAYING,currentAttemptIdx:0,maxAttempts:4,currentAttemptValue:"",previousAttempts:[],secretWord:e.toUpperCase(),backgroundChars:r}}var L=function(t,e){var r=n.INPUT_CHAR,c=n.REMOVE_CHAR,s=n.GUESS_SECRET,o=n.NEW_GAME,u=n.SET_RANDOM_BACKGROUND_CHAR,i=e.type,l=e.payload,p=t.currentAttemptValue,m=t.secretWord,d=t.gameState,h=t.currentAttemptIdx,_=t.maxAttempts,f=t.backgroundChars;switch(i){case r:return p.length<U&&d===a.PLAYING&&1===(null===l||void 0===l?void 0:l.length)?B({},t,{currentAttemptValue:p+l.toUpperCase()}):t;case c:return p.length>0?B({},t,{currentAttemptValue:p.slice(0,-1)}):t;case s:if(p.length===U&&h<=_){var v=function(t,e){if(5!==t.length)throw new Error("Expected secret word to have length of 5");if(5!==e.length)throw new Error("Expected value to have length of 5");for(var r="",n=t,a=0;a<e.length;a++){var c=e[a],s="_";t[a]===c?s="X":t.indexOf(c)>-1&&n.indexOf(c)>-1&&(s="O"),n=n.replace(c,""),r+=s}return r}(m,p),g=d,A=h;return"XXXXX"===v?g=a.WON:h===_?g=a.LOST:A+=1,B({},t,{gameState:g,currentAttemptIdx:A,currentAttemptValue:"",previousAttempts:H(t.previousAttempts).concat([{input:p,result:v}])})}return t;case u:if(1===(null===l||void 0===l?void 0:l.length)||2===(null===l||void 0===l?void 0:l.length)){var b=H(f);return b[Math.floor(Math.random()*f.length)]=l,B({},t,{backgroundChars:b})}return t;case o:return V({secretWord:I(),backgroundChars:W()});default:throw new Error("Action type not recognized: ".concat(e.type))}},U=5,X=(0,u.createContext)({});var Y=function(){var t=(0,u.useReducer)(L,{secretWord:"abcde",backgroundChars:["a","b","c","d","e"]},V),e=t[0],r=t[1],s=e.currentAttemptIdx,o=e.currentAttemptValue,l=e.secretWord,p=e.gameState,m=e.previousAttempts,d=e.maxAttempts,h=e.backgroundChars,_=(0,u.useCallback)((function(t){var e=t.key;switch(e){case"Enter":p===a.PLAYING?r({type:n.GUESS_SECRET}):r({type:n.NEW_GAME});break;case"Backspace":r({type:n.REMOVE_CHAR});break;default:1===e.length&&e.match(/[a-z]/i)&&r({type:n.INPUT_CHAR,payload:e})}}),[p]);return(0,u.useEffect)((function(){r({type:n.NEW_GAME})}),[]),(0,u.useEffect)((function(){return document.addEventListener("keydown",_),function(){document.removeEventListener("keydown",_)}}),[_]),(0,c.jsxs)(X.Provider,{value:r,children:[(0,c.jsxs)("div",{className:k().shmurgle_container,children:[(0,c.jsx)(i,{gameState:p,currentAttemptIdx:s,maxAttempts:d,secretWord:l}),(0,c.jsx)(M,{gameState:p,currentAttemptIdx:s,currentAttemptValue:o,previousAttempts:m,maxAttempts:d}),(0,c.jsx)("button",{className:k().reset_button,onClick:function(){return r({type:n.NEW_GAME})},disabled:0===s&&p===a.PLAYING,children:"New Game"})]}),(0,c.jsx)(N,{backgroundChars:h,gameState:p,currentAttemptIdx:s,maxAttempts:d,currentAttemptValue:o,previousAttempts:m})]})},D=r(7160),z=r.n(D),K=function(){return(0,c.jsxs)("div",{children:[(0,c.jsxs)(o(),{children:[(0,c.jsx)("title",{children:"Shmurgle"}),(0,c.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,c.jsx)("main",{className:z().main,children:(0,c.jsx)(Y,{})})]})}},8856:function(t){t.exports={attempts_container:"Attempts_attempts_container__K2Se7",attempt:"Attempts_attempt__SMFc8",attempt_char:"Attempts_attempt_char__Z8Iz9",current:"Attempts_current__9oge2",width_animation:"Attempts_width_animation__741lu",attempt_char__correct:"Attempts_attempt_char__correct__MWGti",attempt_char__present:"Attempts_attempt_char__present__d7oMB",attempt_char__absent:"Attempts_attempt_char__absent__8vH3r"}},9221:function(t){t.exports={background_chars:"BackgroundChars_background_chars__XaVML",background_char:"BackgroundChars_background_char__syS33",present:"BackgroundChars_present__Ofys3",absent:"BackgroundChars_absent__vVOwR",highlight:"BackgroundChars_highlight__ZMKuM",pulsate:"BackgroundChars_pulsate__fv979"}},9885:function(t){t.exports={background_waves:"BackgroundWaves_background_waves__4EMsy",waves:"BackgroundWaves_waves__yNdm1",grower:"BackgroundWaves_grower__egVIv",parallax:"BackgroundWaves_parallax__AGmbB","move-forever":"BackgroundWaves_move-forever__WTE1U"}},7160:function(t){t.exports={main:"Home_main__nLjiQ"}},8716:function(t){t.exports={shmurgle_container:"Shmurgle_shmurgle_container__eHIBC",background_container:"Shmurgle_background_container__31ptI",reset_button:"Shmurgle_reset_button__nbdhN"}}},function(t){t.O(0,[562,774,888,179],(function(){return e=8312,t(t.s=e);var e}));var e=t.O();_N_E=e}]);